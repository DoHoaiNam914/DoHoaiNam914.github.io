{"version":3,"file":"cac-tien-ich.js","names":["Utils","convertTextToHtml","text","paragraph","document","createElement","innerText","innerHTML","replace","convertHtmlToText","html","getTrieRegexPatternFromWords","words","prefix","arguments","length","undefined","suffix","trieData","word","referenceData","char","hasOwnProperty","getRegexPattern","data","Object","keys","alternation","trie","isNoncapturing","sort","recurse","push","getRegexEscapedText","isTrieOnly","concat","join","result","getRegexEscapedReplacement","replacement","_defineProperty"],"sources":["../static/js/cac-tien-ich.js"],"sourcesContent":["class Utils {\n  static CORS_PROXY = 'https://corsproxy.itsdhnam.workers.dev/';\n\n  static convertTextToHtml(text) {\n    const paragraph = document.createElement('p');\n    paragraph.innerText = text;\n    return paragraph.innerHTML.replace(/<br>/g, '\\n');\n  }\n\n  static convertHtmlToText(html) {\n    const paragraph = document.createElement('p');\n    paragraph.innerHTML = html;\n    return paragraph.innerText;\n  }\n\n  /* eslint-disable */\n\n  static getTrieRegexPatternFromWords(words, prefix = '', suffix = '') {\n    const trieData = {};\n\n    for (const word of words) {\n      let referenceData = trieData;\n\n      for (const char of word) {\n        referenceData[char] = referenceData.hasOwnProperty(char) ? referenceData[char] : {};\n        referenceData = referenceData[char];\n      }\n\n      referenceData[''] = 1;\n    }\n\n    return prefix + this.getRegexPattern(trieData) + suffix;\n  }\n\n  static getRegexPattern(data) {\n    if (data.hasOwnProperty('') && Object.keys(data).length === 1) return '';\n    const alternation = [];\n    const trie = [];\n    let isNoncapturing = false;\n\n    for (const char of Object.keys(data).sort()) {\n      if (typeof data[char] === 'object') {\n        const recurse = this.getRegexPattern(data[char]);\n\n        if (recurse != null) {\n          alternation.push(this.getRegexEscapedText(char) + recurse);\n        } else {\n          trie.push(this.getRegexEscapedText(char));\n        }\n      } else {\n        isNoncapturing = true;\n      }\n    }\n\n    const isTrieOnly = alternation.length === 0;\n\n    if (trie.length > 0) {\n      if (trie.length === 1) {\n        alternation.push(trie[0]);\n      } else {\n        alternation.push(`[${trie.join('')}]`);\n      }\n    }\n\n    let result = '';\n\n    if (alternation.length === 1) {\n      result = alternation[0];\n    } else {\n      result = `(?:${alternation.join('|')})`;\n    }\n\n    if (isNoncapturing) {\n      if (isTrieOnly) {\n        result += '?';\n      } else {\n        result = `(?:${result})?`;\n      }\n    }\n\n    return result;\n  }\n\n  /* eslint-enable */\n\n  static getRegexEscapedText(text) {\n    return text.replace(/[$()*+\\-.\\\\/?[\\]^{|}]/g, '\\\\$&');\n  }\n\n  static getRegexEscapedReplacement(replacement) {\n    return replacement.replace(/\\$/g, '$$$&');\n  }\n}\n"],"mappings":"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"}