/* Pagination module

   A set of styles to paginate ePublications */

/* Config */

:root {
  /* Optimal line-length (rem will take :root font-size into account, whatever the body’s font-size) */
  --DHN__maxLineLength: 40.4375rem;

  /* Default page horizontal margins (in pixels so that it won’t resize with font-size) */
  --DHN__pageGutter: 8px;
}

/* Reset page margins for Forward compatibility */

@page {
  margin: 0 !important;
}

/* :root selector has same specificity as a class i.e. 0010
   We might have to change that to html / context
   -> https://css-tricks.com/almanac/selectors/r/root/ */

:root {

  /* In case you use left position to scroll, can be removed if using transform: translateX() */
  position: relative;

  -webkit-columns: auto auto !important;
  -moz-columns: auto auto !important;
  columns: auto auto !important;

  width: auto !important;
  height: auto !important;
  max-width: none !important;
  max-height: none !important;
  min-width: 0 !important;
  min-height: 0 !important;
  padding: 0 !important;
  margin: 0 !important;

  /* Column size will depend on this if we want to make it responsive */
  font-size: 112.5% !important;
  overflow-wrap: break-word;

  -webkit-text-size-adjust: 100%;

  /* Switch to newer box model (not inherited by authors’ styles) */
  box-sizing: border-box;

  /* Fix bug for older Chrome */
  -webkit-perspective: 1;
  /* Prevents options pop-up when long tap in webkit */
  -webkit-touch-callout: none;
}

body {

  /*  overflow: hidden; bugfix: contents won’t paginate in Firefox and one sample in Safari */
  width: 100%;

  /* Limit line-length but we have to reset when 2 columns and control the viewport.
     By using max-width + margin auto, margins will shrink when font-size increases,
     which is what would be expected in terms of typography. */
  max-width: var(--DHN__maxLineLength) !important;
  padding: 0 var(--DHN__pageGutter) !important;
  margin: 0 !important;

  /* We need a minimum padding on body so that descandants/ascendants in italic/script are not cut-off.
     Drawback: we have to use border-box so that it doesn’t screw the box model,
     which means it impacts colWidth and max-width */
  box-sizing: border-box;
}

/* Sepia theme

   A preset theme for sepia */

/* CONFIG */

:root[style*="dohoainam-sepia-theme"] {
  --DHN__backgroundColor: #ebd2a5;
  --DHN__textColor: #5a4114;

  --DHN__linkColor: #50320c;
  --DHN__visitedColor: #50320c;

  --DHN__maxLineLength: 40.01rem; /* Forcing a reflow in Blink/Webkit so that blend mode can work */
}

/* we don’t need to redeclare bg-color and color for :root since we will inherit and update from day/default mode */

:root[style*="dohoainam-sepia-theme"] *:not(a) {
  color: inherit !important;
  background-color: transparent !important;
}

:root[style*="dohoainam-sepia-theme"] a:link,
:root[style*="dohoainam-sepia-theme"] a:link * {
  color: var(--DHN__linkColor);
}

:root[style*="dohoainam-sepia-theme"] a:visited,
:root[style*="dohoainam-sepia-theme"] a:visited * {
  color: var(--DHN__visitedColor);
}

/* Black theme

   A preset theme for black */

/* CONFIG */

/* [style*="--USER__appearance"] can be used to increase specificity but performance hit */

:root[style*="dohoainam-black-theme"] {
  --DHN__backgroundColor: black;
  --DHN__textColor: #d2d2d2;

  --DHN__linkColor: #ebebeb;
  --DHN__visitedColor: #ebebeb;
}

/* we don’t need to redeclare bg-color and color for :root since we will inherit and update from day/default mode */

:root[style*="dohoainam-black-theme"] *:not(a) {
  color: inherit !important;
  background-color: transparent !important;
  border-color: currentColor !important;
}

:root[style*="dohoainam-black-theme"] a:link,
:root[style*="dohoainam-black-theme"] a:link * {
  color: var(--DHN__linkColor) !important;
}

:root[style*="dohoainam-black-theme"] a:visited,
:root[style*="dohoainam-black-theme"] a:visited * {
  color: var(--DHN__visitedColor) !important;
}

/* Page margins pref

   A submodule managing page margins for user settings
   Part of “Chrome Advanced” class – no flag required. */

/* Page Margins: the user margin is a factor of the page gutter e.g. 0.5, 0.75, 1, 1.25, 1.5, etc. */

:root[style*="--USER__pageMargins"] body {
  padding: 0 calc(var(--DHN__pageGutter) * var(--USER__pageMargins)) !important;
}

/* Text align pref

   A submodule managing text-align for user settings
   Part of “User Overrides Advanced” class – “advanced settings” flag required. */

:root[style*="--USER__textAlign"] {
  text-align: var(--USER__textAlign);
}

:root[style*="--USER__textAlign"] body,
:root[style*="--USER__textAlign"] *:not(blockquote):not(figcaption) p,
:root[style*="--USER__textAlign"] li {
  text-align: inherit !important;
  -moz-text-align-last: auto !important;
  -epub-text-align-last: auto !important;
  text-align-last: auto !important;
}

/* Managing hyphenation automatically for text-align values */

:root[style*="--USER__textAlign: justify"] body,
:root[style*="--USER__textAlign:justify"] body {
  -webkit-hyphens: auto;
  -moz-hyphens: auto;
  -ms-hyphens: auto;
  -epub-hyphens: auto;
  hyphens: auto;
}

:root[style*="--USER__textAlign: left"] body,
:root[style*="--USER__textAlign:left"] body,
:root[style*="--USER__textAlign: right"] body,
:root[style*="--USER__textAlign:right"] body {
  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  -epub-hyphens: none;
  hyphens: none;
}

/* Font size pref

   A submodule managing font-size for user settings
   Part of “User Overrides” class – no flag required. */

:root[style*="--USER__fontSize"] {
  font-size: var(--USER__fontSize) !important;
}

/* Line height pref

   A submodule managing line-height for user settings
   Part of “User Overrides Advanced” class – “advanced settings” flag required. */

:root[style*="--USER__lineHeight"] {
  line-height: var(--USER__lineHeight) !important;
}

:root[style*="--USER__lineHeight"] body,
:root[style*="--USER__lineHeight"] p,
:root[style*="--USER__lineHeight"] li,
:root[style*="--USER__lineHeight"] div {
  line-height: inherit;
}

/* Para spacing pref

   A submodule managing paragraphs’ top and bottom margins for user settings
   Part of “User Overrides Advanced” class – “advanced settings” flag required. */

:root[style*="--USER__paraSpacing"] p {
  margin-top: var(--USER__paraSpacing) !important;
  margin-bottom: var(--USER__paraSpacing) !important;
}