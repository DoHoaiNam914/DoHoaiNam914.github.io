<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../../css/app.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="../../js/app.js"></script>
    <script src="https://github.com/js-cookie/js-cookie/releases/download/v3.0.1/js.cookie.js"></script>
    <script>
      var fontSize = Cookies.get('fontSize') || 12;
      var background = Cookies.get('background') || 'white';
      var BG_TO_FG = new Map([
        ['white', 'black'],
        ['black', '#d2d2d2'],
        ['#ebd2a5', '#5a4114'],
        ['#ffffe0', 'black']
      ]);

      var BG_TO_HPLINK = new Map([
        ['white', 'blue'],
        ['black', '#ebebeb'],
        ['#ebd2a5', '#50320c'],
        ['#ffffe0', '32327d']
      ]);

      $(document.body).ready(function() {
        setFontSize();
        setBackground();
      });

      $("#home-button").on("click", () => navigate('trang1'))
      $("#settings-button").on("click", () => toggle('#settings', 'fade-in-down'));
      $("#shrink").on("click", function() {
        fontSize = fontSize > 6 ? fontSize - 1 : (fontSize < 6 ? 12 : fontSize);
        setFontSize();
        Cookies.set('fontSize', fontSize, { expires: 365 });
      });

      $("#enlarge").on("click", function() {
        fontSize = fontSize < 35 ? fontSize + 1 : (fontSize > 35 ? 12 : fontSize);
        setFontSize();
        Cookies.set('fontSize', fontSize, { expires: 365 });
      });

      $("span.change-background-button").on("click", function() {
        $("span.change-background-button").removeClass("selected");
        background = $(this).data("color");
        setBackground();
        Cookies.set('background', background, { expires: 365 });
      });

      function toggle(classicon, effect) {
        if ($(classicon).hasClass("enabled")) {
          setAllDisabled();
        } else {""
          setAllDisabled();
          $(classicon).addClass("enabled");
          $("html").addClass("overflow-hidden");
          $(classicon.concat(' .toggle_body')).addClass("animation " + effect);
        }
      }

      function setFontSize() {
        $("input.font-size-input").val(fontSize.concat('px')); 
        $(document.body).css("font-size", fontSize.concat('px'));
        $(document.body).css("line-height", fontSize / 10 + "em");
      }

      function setBackground() {
        $("span.change-background-button[data-color=\"" + background.concat('"]')).addClass("selected");
        $(document.body).css("color", BG_TO_FG.get(background));
        $(document.body).css("background-color", background);
      }

      function setAllDisabled() {
        $(".toggle").removeClass("enabled");
        $(".toggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hidden");
      }
    </script>
  </head>
  <body>
    <span class="navigator">
      <a class="button" href=".."><i class="fas fa-backward"></i></a>
      <a class="button" id="home-button"><i class="fas fa-home"></i></a>
      <a class="button" id="settings-button"><i class="fas fa-font"></i></a>
      <a class="button" href="."><i class="fas fa-forward"></i></a>
    </span>
    <section id="settings" class="toggle">
      <div class="settings-body toggle_body">
        <header class="settings-header">Thiết lập</header>
        <main class="setting-body">
          <div class="setting" id="font-size">
            <label>Kích cỡ phông chữ</label>
            <div class="font-size-body">
              <span class="font-size-button" id="shrink"><i class="fas fa-chevron-left"></i></span>
              <input class="font-size-input" disabled="" value="12px" type="text">
              <span class="font-size-button" id="enlarge"><i class="fas fa-chevron-right"></i></span>
            </div>
          </div>
          <div class="setting" id="change-background">
            <label>Thay đổi màu nền</label>
            <div class="change-background-body">
              <span class="change-background-button" id="white" data-color="white" style="background-color: white"></span>
              <span class="change-background-button" id="black" data-color="black" style="background-color: black"></span>
              <span class="change-background-button" id="sepia" data-color="#ebd2a5" style="background-color: #ebd2a5"></span>
              <span class="change-background-button" id="cream" data-color="#ffffe0" style="background-color: #ffffe0"></span>
            </div>
          </div>
        </main>
      </div>
    </section>
  </body>
</html>